{% extends "admin/base.html" %} {% block title %}{% if hub %}Edit{% else %}Add{%
endif %} Global Hub{% endblock %} {% block page_title %}{% if hub %}Edit{% else
%}Add{% endif %} Global Hub{% endblock %} {% block page_subtitle %}Manage
international office locations{% endblock %} {% block extra_styles %}
<style>
  .form-container {
    max-width: 900px;
    margin: 0 auto;
  }

  .form-card {
    background: rgba(255, 255, 255, 0.03);
    border: 1px solid rgba(255, 255, 255, 0.08);
    border-radius: 16px;
    padding: 2rem;
    margin-bottom: 2rem;
  }

  .form-card-header {
    display: flex;
    align-items: center;
    gap: 1rem;
    margin-bottom: 2rem;
    padding-bottom: 1rem;
    border-bottom: 1px solid rgba(255, 255, 255, 0.08);
  }

  .form-card-icon {
    width: 48px;
    height: 48px;
    background: linear-gradient(135deg, #0099ff, #0561e2);
    border-radius: 12px;
    display: flex;
    align-items: center;
    justify-content: center;
    box-shadow: 0 4px 15px rgba(0, 153, 255, 0.3);
  }

  .form-card-icon svg {
    width: 24px;
    height: 24px;
  }

  .form-card-title h3 {
    font-size: 1.25rem;
    font-weight: 700;
    color: #fff;
    margin-bottom: 0.25rem;
  }

  .form-card-title p {
    font-size: 0.875rem;
    color: #777e90;
  }

  .form-row {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
    gap: 1.5rem;
    margin-bottom: 1.5rem;
  }

  .form-group {
    margin-bottom: 1.5rem;
  }

  .form-group.full-width {
    grid-column: 1 / -1;
  }

  .form-label {
    display: block;
    font-size: 0.875rem;
    font-weight: 600;
    color: #b1b0b6;
    margin-bottom: 0.5rem;
  }

  .form-label .required {
    color: #fca5a5;
    margin-left: 0.25rem;
  }

  .form-control {
    width: 100%;
    padding: 0.875rem 1rem;
    background: rgba(255, 255, 255, 0.05);
    border: 1px solid rgba(255, 255, 255, 0.1);
    border-radius: 10px;
    color: #fff;
    font-size: 0.9375rem;
    transition: all 0.3s ease;
    font-family: inherit;
  }

  .form-control:focus {
    outline: none;
    background: rgba(255, 255, 255, 0.08);
    border-color: #0099ff;
    box-shadow: 0 0 0 3px rgba(0, 153, 255, 0.1);
  }

  .form-control::placeholder {
    color: #777e90;
  }

  textarea.form-control {
    min-height: 100px;
    resize: vertical;
  }

  .form-help {
    font-size: 0.8125rem;
    color: #777e90;
    margin-top: 0.5rem;
    display: flex;
    align-items: center;
    gap: 0.5rem;
  }

  .form-help svg {
    width: 16px;
    height: 16px;
    flex-shrink: 0;
  }

  /* Emoji/Flag Picker */
  .emoji-input-wrapper {
    position: relative;
  }

  .emoji-input {
    padding-right: 4rem;
  }

  .emoji-preview {
    position: absolute;
    right: 1rem;
    top: 50%;
    transform: translateY(-50%);
    font-size: 2rem;
    line-height: 1;
    pointer-events: none;
  }

  .emoji-suggestions {
    display: flex;
    gap: 0.5rem;
    flex-wrap: wrap;
    margin-top: 0.75rem;
  }

  .emoji-btn {
    background: rgba(255, 255, 255, 0.05);
    border: 1px solid rgba(255, 255, 255, 0.1);
    border-radius: 8px;
    padding: 0.5rem 0.75rem;
    font-size: 1.5rem;
    cursor: pointer;
    transition: all 0.3s ease;
    line-height: 1;
  }

  .emoji-btn:hover {
    background: rgba(0, 153, 255, 0.1);
    border-color: rgba(0, 153, 255, 0.3);
    transform: scale(1.1);
  }

  /* Checkbox Groups */
  .checkbox-grid {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
    gap: 1rem;
  }

  .checkbox-group {
    display: flex;
    align-items: center;
    gap: 0.75rem;
    padding: 1rem;
    background: rgba(255, 255, 255, 0.03);
    border: 1px solid rgba(255, 255, 255, 0.08);
    border-radius: 10px;
    cursor: pointer;
    transition: all 0.3s ease;
  }

  .checkbox-group:hover {
    background: rgba(255, 255, 255, 0.05);
    border-color: rgba(255, 255, 255, 0.15);
  }

  .checkbox-group input[type="checkbox"] {
    width: 20px;
    height: 20px;
    cursor: pointer;
    accent-color: #0099ff;
  }

  .checkbox-label {
    flex: 1;
    cursor: pointer;
  }

  .checkbox-label strong {
    display: block;
    font-size: 0.9375rem;
    font-weight: 600;
    color: #fff;
    margin-bottom: 0.25rem;
  }

  .checkbox-label span {
    display: block;
    font-size: 0.8125rem;
    color: #777e90;
  }

  /* Form Actions */
  .form-actions {
    display: flex;
    gap: 1rem;
    margin-top: 2rem;
    padding-top: 2rem;
    border-top: 1px solid rgba(255, 255, 255, 0.08);
  }

  .btn {
    flex: 1;
    padding: 1rem 2rem;
    border: none;
    border-radius: 10px;
    font-size: 0.9375rem;
    font-weight: 600;
    cursor: pointer;
    transition: all 0.3s ease;
    display: flex;
    align-items: center;
    justify-content: center;
    gap: 0.5rem;
    text-decoration: none;
  }

  .btn svg {
    width: 20px;
    height: 20px;
  }

  .btn-primary {
    background: linear-gradient(135deg, #0099ff, #0561e2);
    color: #fff;
    box-shadow: 0 4px 15px rgba(0, 153, 255, 0.3);
  }

  .btn-primary:hover {
    transform: translateY(-2px);
    box-shadow: 0 6px 20px rgba(0, 153, 255, 0.4);
  }

  .btn-secondary {
    background: rgba(255, 255, 255, 0.05);
    border: 1px solid rgba(255, 255, 255, 0.1);
    color: #b1b0b6;
  }

  .btn-secondary:hover {
    background: rgba(255, 255, 255, 0.08);
    color: #fff;
  }

  /* Responsive */
  @media (max-width: 768px) {
    .form-card {
      padding: 1.5rem;
    }

    .form-row {
      grid-template-columns: 1fr;
    }

    .form-actions {
      flex-direction: column-reverse;
    }

    .btn {
      width: 100%;
    }

    .checkbox-grid {
      grid-template-columns: 1fr;
    }
  }
</style>
{% endblock %} {% block content %}
<div class="form-container">
  <form method="POST">
    <!-- Basic Information Card -->
    <div class="form-card">
      <div class="form-card-header">
        <div class="form-card-icon">
          <svg
            viewBox="0 0 24 24"
            fill="none"
            stroke="currentColor"
            stroke-width="2"
          >
            <path d="M21 10c0 7-9 13-9 13s-9-6-9-13a9 9 0 0 1 18 0z"></path>
            <circle cx="12" cy="10" r="3"></circle>
          </svg>
        </div>
        <div class="form-card-title">
          <h3>Location Information</h3>
          <p>Enter the office location details</p>
        </div>
      </div>

      <div class="form-row">
        <!-- Country -->
        <div class="form-group">
          <label class="form-label">
            Country<span class="required">*</span>
          </label>
          <input
            type="text"
            name="country"
            class="form-control"
            placeholder="e.g., United States, India"
            value="{{ hub.country if hub else '' }}"
            required
          />
        </div>

        <!-- City -->
        <div class="form-group">
          <label class="form-label">
            City<span class="required">*</span>
          </label>
          <input
            type="text"
            name="city"
            class="form-control"
            placeholder="e.g., New York, Mumbai"
            value="{{ hub.city if hub else '' }}"
            required
          />
        </div>
      </div>

      <!-- Flag/Emoji -->
      <div class="form-group">
        <label class="form-label">
          Country Flag (Emoji)<span class="required">*</span>
        </label>
        <div class="emoji-input-wrapper">
          <input
            type="text"
            name="flag"
            id="flagInput"
            class="form-control emoji-input"
            placeholder="Enter flag emoji"
            value="{{ hub.flag if hub else '' }}"
            maxlength="4"
            required
          />
          <span class="emoji-preview" id="emojiPreview"
            >{{ hub.flag if hub else 'üè≥Ô∏è' }}</span
          >
        </div>
        <div class="form-help">
          <svg
            viewBox="0 0 24 24"
            fill="none"
            stroke="currentColor"
            stroke-width="2"
          >
            <circle cx="12" cy="12" r="10"></circle>
            <line x1="12" y1="16" x2="12" y2="12"></line>
            <line x1="12" y1="8" x2="12.01" y2="8"></line>
          </svg>
          Click a flag below or paste your own emoji
        </div>
        <div class="emoji-suggestions">
          <button type="button" class="emoji-btn" data-emoji="üá∫üá∏">üá∫üá∏</button>
          <button type="button" class="emoji-btn" data-emoji="üáÆüá≥">üáÆüá≥</button>
          <button type="button" class="emoji-btn" data-emoji="üá¨üáß">üá¨üáß</button>
          <button type="button" class="emoji-btn" data-emoji="üá®üá¶">üá®üá¶</button>
          <button type="button" class="emoji-btn" data-emoji="üá¶üá∫">üá¶üá∫</button>
          <button type="button" class="emoji-btn" data-emoji="üá©üá™">üá©üá™</button>
          <button type="button" class="emoji-btn" data-emoji="üá´üá∑">üá´üá∑</button>
          <button type="button" class="emoji-btn" data-emoji="üáØüáµ">üáØüáµ</button>
          <button type="button" class="emoji-btn" data-emoji="üá∏üá¨">üá∏üá¨</button>
          <button type="button" class="emoji-btn" data-emoji="üá¶üá™">üá¶üá™</button>
        </div>
      </div>

      <!-- Address -->
      <div class="form-group">
        <label class="form-label">
          Address<span class="required">*</span>
        </label>
        <textarea
          name="address"
          class="form-control"
          placeholder="Enter full office address"
          required
        >
{{ hub.address if hub else '' }}</textarea
        >
        <div class="form-help">
          <svg
            viewBox="0 0 24 24"
            fill="none"
            stroke="currentColor"
            stroke-width="2"
          >
            <circle cx="12" cy="12" r="10"></circle>
            <line x1="12" y1="16" x2="12" y2="12"></line>
            <line x1="12" y1="8" x2="12.01" y2="8"></line>
          </svg>
          Include street, building, city, state/region, postal code
        </div>
      </div>

      <!-- Maps Link -->
      <div class="form-group">
        <label class="form-label">Google Maps Link</label>
        <input
          type="url"
          name="maps_link"
          class="form-control"
          placeholder="https://maps.google.com/..."
          value="{{ hub.maps_link if hub and hub.maps_link != '#' else '' }}"
        />
        <div class="form-help">
          <svg
            viewBox="0 0 24 24"
            fill="none"
            stroke="currentColor"
            stroke-width="2"
          >
            <circle cx="12" cy="12" r="10"></circle>
            <line x1="12" y1="16" x2="12" y2="12"></line>
            <line x1="12" y1="8" x2="12.01" y2="8"></line>
          </svg>
          Optional: Add Google Maps link for directions
        </div>
      </div>

      <!-- Display Order -->
      <div class="form-group">
        <label class="form-label">Display Order</label>
        <input
          type="number"
          name="order"
          class="form-control"
          placeholder="0"
          value="{{ hub.order if hub else 0 }}"
          min="0"
        />
        <div class="form-help">
          <svg
            viewBox="0 0 24 24"
            fill="none"
            stroke="currentColor"
            stroke-width="2"
          >
            <circle cx="12" cy="12" r="10"></circle>
            <line x1="12" y1="16" x2="12" y2="12"></line>
            <line x1="12" y1="8" x2="12.01" y2="8"></line>
          </svg>
          Lower numbers appear first. Use 0 for default ordering.
        </div>
      </div>
    </div>

    <!-- Status Card -->
    <div class="form-card">
      <div class="form-card-header">
        <div class="form-card-icon">
          <svg
            viewBox="0 0 24 24"
            fill="none"
            stroke="currentColor"
            stroke-width="2"
          >
            <polyline points="9 11 12 14 22 4"></polyline>
            <path
              d="M21 12v7a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11"
            ></path>
          </svg>
        </div>
        <div class="form-card-title">
          <h3>Hub Status & Features</h3>
          <p>Configure hub visibility and special properties</p>
        </div>
      </div>

      <div class="checkbox-grid">
        <label class="checkbox-group">
          <input
            type="checkbox"
            name="active"
            {%
            if
            not
            hub
            or
            hub.active
            %}checked{%
            endif
            %}
          />
          <div class="checkbox-label">
            <strong>Active</strong>
            <span>Display this hub on the website</span>
          </div>
        </label>

        <label class="checkbox-group">
          <input
            type="checkbox"
            name="is_featured"
            {%
            if
            hub
            and
            hub.is_featured
            %}checked{%
            endif
            %}
          />
          <div class="checkbox-label">
            <strong>Featured Hub</strong>
            <span>Highlight as main office</span>
          </div>
        </label>

        <label class="checkbox-group">
          <input
            type="checkbox"
            name="is_coming_soon"
            {%
            if
            hub
            and
            hub.is_coming_soon
            %}checked{%
            endif
            %}
          />
          <div class="checkbox-label">
            <strong>Coming Soon</strong>
            <span>Mark as opening soon</span>
          </div>
        </label>
      </div>
    </div>

    <!-- Form Actions -->
    <div class="form-actions">
      <a href="{{ url_for('admin_hubs') }}" class="btn btn-secondary">
        <svg
          viewBox="0 0 24 24"
          fill="none"
          stroke="currentColor"
          stroke-width="2"
        >
          <line x1="19" y1="12" x2="5" y2="12"></line>
          <polyline points="12 19 5 12 12 5"></polyline>
        </svg>
        Cancel
      </a>
      <button type="submit" class="btn btn-primary">
        <svg
          viewBox="0 0 24 24"
          fill="none"
          stroke="currentColor"
          stroke-width="2"
        >
          <polyline points="9 11 12 14 22 4"></polyline>
          <path
            d="M21 12v7a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11"
          ></path>
        </svg>
        {% if hub %}Update{% else %}Create{% endif %} Hub
      </button>
    </div>
  </form>
</div>

<script>
  // Emoji/Flag input handling
  const flagInput = document.getElementById("flagInput");
  const emojiPreview = document.getElementById("emojiPreview");
  const emojiButtons = document.querySelectorAll(".emoji-btn");

  // Update preview on input
  flagInput.addEventListener("input", (e) => {
    const value = e.target.value.trim();
    emojiPreview.textContent = value || "üè≥Ô∏è";
  });

  // Emoji button click handler
  emojiButtons.forEach((btn) => {
    btn.addEventListener("click", (e) => {
      e.preventDefault();
      const emoji = btn.dataset.emoji;
      flagInput.value = emoji;
      emojiPreview.textContent = emoji;

      // Visual feedback
      btn.style.transform = "scale(1.2)";
      setTimeout(() => {
        btn.style.transform = "";
      }, 200);
    });
  });

  // Form validation
  document.querySelector("form").addEventListener("submit", (e) => {
    const country = document
      .querySelector('input[name="country"]')
      .value.trim();
    const city = document.querySelector('input[name="city"]').value.trim();
    const flag = flagInput.value.trim();
    const address = document
      .querySelector('textarea[name="address"]')
      .value.trim();

    if (!country || !city || !flag || !address) {
      e.preventDefault();
      alert("Please fill in all required fields");
      return;
    }

    if (flag.length > 4) {
      e.preventDefault();
      alert("Flag emoji is too long. Please use a single emoji.");
      return;
    }
  });
</script>
{% endblock %}
