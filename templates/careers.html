{% extends "base.html" %}
{% block title %}Careers - Join Our Team - {{ site_settings.site_name }}{% endblock %}

{% block extra_css %}
<style>
  .careers-hero {
    padding: 8rem 2rem 4rem;
    text-align: center;
    background: radial-gradient(circle at 50% 0%, rgba(0, 153, 255, 0.15), transparent 60%);
  }

  .careers-hero h1 {
    font-size: 3.5rem;
    font-weight: 700;
    margin-bottom: 1rem;
    background: linear-gradient(135deg, #fff 0%, #b1b0b6 100%);
    -webkit-background-clip: text;
    -webkit-text-fill-color: transparent;
  }

  .careers-hero p {
    font-size: 1.25rem;
    color: #777e90;
    max-width: 600px;
    margin: 0 auto;
  }

  .careers-container {
    max-width: 1400px;
    margin: 0 auto;
    padding: 0 2rem 4rem;
  }

  .careers-stats {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
    gap: 2rem;
    margin-bottom: 4rem;
  }

  .stat-box {
    text-align: center;
    padding: 2rem;
    background: rgba(18, 19, 22, 0.6);
    border-radius: 16px;
    border: 1px solid rgba(255, 255, 255, 0.05);
  }

  .stat-box .number {
    font-size: 3rem;
    font-weight: 700;
    background: linear-gradient(135deg, #0099ff, #0561e2);
    -webkit-background-clip: text;
    -webkit-text-fill-color: transparent;
  }

  .stat-box .label {
    color: #777e90;
    margin-top: 0.5rem;
  }

  .filters-section {
    background: rgba(18, 19, 22, 0.6);
    border-radius: 16px;
    padding: 2rem;
    margin-bottom: 3rem;
    border: 1px solid rgba(255, 255, 255, 0.05);
  }

  .filters-grid {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
    gap: 1.5rem;
  }

  .filter-group {
    display: flex;
    flex-direction: column;
    gap: 0.5rem;
  }

  .filter-group label {
    font-size: 0.875rem;
    color: #b1b0b6;
    font-weight: 500;
  }

  .filter-group select {
    background: rgba(0, 0, 0, 0.4);
    border: 1px solid rgba(255, 255, 255, 0.1);
    border-radius: 10px;
    padding: 0.75rem 1rem;
    color: #fff;
    font-size: 0.95rem;
    cursor: pointer;
  }

  .filter-actions {
    display: flex;
    gap: 1rem;
    margin-top: 1.5rem;
  }

  .btn-filter {
    padding: 0.75rem 2rem;
    background: linear-gradient(135deg, #0099ff, #0561e2);
    color: #fff;
    border: none;
    border-radius: 10px;
    font-weight: 600;
    cursor: pointer;
    transition: all 0.3s;
  }

  .btn-filter:hover {
    transform: translateY(-2px);
    box-shadow: 0 8px 20px rgba(0, 153, 255, 0.3);
  }

  .btn-clear {
    padding: 0.75rem 2rem;
    background: transparent;
    color: #b1b0b6;
    border: 1px solid rgba(255, 255, 255, 0.1);
    border-radius: 10px;
    font-weight: 600;
    cursor: pointer;
    transition: all 0.3s;
  }

  .btn-clear:hover {
    border-color: #0099ff;
    color: #0099ff;
  }

  .jobs-grid {
    display: grid;
    gap: 2rem;
  }

  .job-card {
    background: rgba(18, 19, 22, 0.6);
    border: 1px solid rgba(255, 255, 255, 0.05);
    border-radius: 20px;
    padding: 2rem;
    transition: all 0.3s;
    position: relative;
    overflow: hidden;
  }

  .job-card::before {
    content: '';
    position: absolute;
    top: 0;
    left: 0;
    right: 0;
    height: 4px;
    background: linear-gradient(90deg, #0099ff, #0561e2);
    transform: scaleX(0);
    transform-origin: left;
    transition: transform 0.3s;
  }

  .job-card:hover {
    border-color: rgba(0, 153, 255, 0.3);
    transform: translateY(-4px);
    box-shadow: 0 12px 40px rgba(0, 153, 255, 0.2);
  }

  .job-card:hover::before {
    transform: scaleX(1);
  }

  .job-card.featured {
    border-color: rgba(0, 153, 255, 0.3);
    background: rgba(0, 153, 255, 0.05);
  }

  .featured-badge {
    position: absolute;
    top: 2rem;
    right: 2rem;
    background: linear-gradient(135deg, #0099ff, #0561e2);
    color: #fff;
    padding: 0.375rem 0.875rem;
    border-radius: 6px;
    font-size: 0.75rem;
    font-weight: 600;
    text-transform: uppercase;
    letter-spacing: 0.5px;
  }

  .job-header {
    display: flex;
    justify-content: space-between;
    align-items: start;
    margin-bottom: 1.5rem;
  }

  .job-title {
    font-size: 1.5rem;
    font-weight: 700;
    color: #fff;
    margin-bottom: 0.5rem;
  }

  .job-department {
    color: #0099ff;
    font-size: 1rem;
    font-weight: 500;
  }

  .job-meta {
    display: flex;
    flex-wrap: wrap;
    gap: 1rem;
    margin-bottom: 1.5rem;
  }

  .meta-item {
    display: flex;
    align-items: center;
    gap: 0.5rem;
    color: #777e90;
    font-size: 0.875rem;
  }

  .meta-item svg {
    width: 16px;
    height: 16px;
    opacity: 0.7;
  }

  .job-tags {
    display: flex;
    flex-wrap: wrap;
    gap: 0.5rem;
    margin-bottom: 1.5rem;
  }

  .tag {
    padding: 0.375rem 0.875rem;
    background: rgba(0, 153, 255, 0.1);
    border: 1px solid rgba(0, 153, 255, 0.2);
    border-radius: 6px;
    color: #0099ff;
    font-size: 0.8125rem;
    font-weight: 500;
  }

  .job-description {
    color: #777e90;
    line-height: 1.8;
    margin-bottom: 1.5rem;
  }

  .job-footer {
    display: flex;
    justify-content: space-between;
    align-items: center;
    padding-top: 1.5rem;
    border-top: 1px solid rgba(255, 255, 255, 0.05);
  }

  .job-date {
    color: #777e90;
    font-size: 0.875rem;
  }

  .btn-apply {
    display: inline-flex;
    align-items: center;
    gap: 0.5rem;
    padding: 0.75rem 1.5rem;
    background: linear-gradient(135deg, #0099ff, #0561e2);
    color: #fff;
    text-decoration: none;
    border-radius: 10px;
    font-weight: 600;
    transition: all 0.3s;
  }

  .btn-apply:hover {
    transform: translateY(-2px);
    box-shadow: 0 8px 20px rgba(0, 153, 255, 0.3);
  }

  .empty-state {
    text-align: center;
    padding: 4rem 2rem;
    color: #777e90;
  }

  .empty-state svg {
    margin-bottom: 1.5rem;
    opacity: 0.3;
  }

  .empty-state h3 {
    font-size: 1.5rem;
    color: #b1b0b6;
    margin-bottom: 0.5rem;
  }

  @media (max-width: 768px) {
    .careers-hero h1 {
      font-size: 2.5rem;
    }

    .filters-grid {
      grid-template-columns: 1fr;
    }

    .filter-actions {
      flex-direction: column;
    }

    .job-header {
      flex-direction: column;
    }

    .featured-badge {
      position: static;
      display: inline-block;
      margin-bottom: 1rem;
    }
  }
  @media (max-width: 768px) {
  .careers-hero {
    padding: 6rem 1.5rem 3rem;
  }

  .careers-hero h1 {
    font-size: 2rem;
    line-height: 1.2;
    margin-bottom: 0.875rem;
  }

  .careers-hero p {
    font-size: 0.95rem;
    line-height: 1.6;
    padding: 0 0.5rem;
  }

  .careers-container {
    padding: 0 1rem 2rem;
  }

  .careers-stats {
    grid-template-columns: 1fr;
    gap: 1rem;
    margin-bottom: 2rem;
  }

  .stat-box {
    padding: 1.5rem;
    border-radius: 14px;
  }

  .stat-box .number {
    font-size: 2.25rem;
  }

  .stat-box .label {
    font-size: 0.875rem;
    margin-top: 0.35rem;
  }

  .filters-section {
    padding: 1.5rem;
    margin-bottom: 2rem;
    border-radius: 14px;
  }

  .filters-grid {
    grid-template-columns: 1fr;
    gap: 1.25rem;
  }

  .filter-group label {
    font-size: 0.8rem;
    margin-bottom: 0.4rem;
  }

  .filter-group select {
    padding: 0.7rem 0.875rem;
    font-size: 0.875rem;
    border-radius: 8px;
  }

  .filter-actions {
    flex-direction: column;
    gap: 0.75rem;
    margin-top: 1.25rem;
  }

  .btn-filter,
  .btn-clear {
    width: 100%;
    padding: 0.875rem 1.5rem;
    font-size: 0.9rem;
    border-radius: 8px;
  }

  .jobs-grid {
    gap: 1.5rem;
  }

  .job-card {
    padding: 1.5rem;
    border-radius: 16px;
  }

  .job-card.featured {
    padding-top: 1.5rem;
  }

  .featured-badge {
    position: static;
    display: inline-block;
    margin-bottom: 1rem;
    padding: 0.35rem 0.75rem;
    font-size: 0.7rem;
  }

  .job-header {
    flex-direction: column;
    margin-bottom: 1.25rem;
  }

  .job-title {
    font-size: 1.25rem;
    margin-bottom: 0.4rem;
    line-height: 1.3;
  }

  .job-department {
    font-size: 0.9rem;
    margin-bottom: 0.75rem;
  }

  .job-meta {
    gap: 0.75rem;
    margin-bottom: 1.25rem;
    flex-direction: column;
    align-items: flex-start;
  }

  .meta-item {
    font-size: 0.8rem;
    gap: 0.4rem;
  }

  .meta-item svg {
    width: 14px;
    height: 14px;
  }

  .job-tags {
    gap: 0.4rem;
    margin-bottom: 1.25rem;
  }

  .tag {
    padding: 0.35rem 0.75rem;
    font-size: 0.75rem;
    border-radius: 5px;
  }

  .job-description {
    font-size: 0.875rem;
    line-height: 1.6;
    margin-bottom: 1.25rem;
  }

  .job-footer {
    flex-direction: column;
    gap: 1rem;
    align-items: stretch;
    padding-top: 1.25rem;
  }

  .job-date {
    font-size: 0.8rem;
    text-align: center;
    order: 2;
  }

  .btn-apply {
    width: 100%;
    justify-content: center;
    padding: 0.875rem 1.25rem;
    font-size: 0.9rem;
    border-radius: 8px;
    order: 1;
  }

  .btn-apply svg {
    width: 18px;
    height: 18px;
  }

  .empty-state {
    padding: 3rem 1.5rem;
  }

  .empty-state svg {
    width: 60px;
    height: 60px;
    margin-bottom: 1rem;
  }

  .empty-state h3 {
    font-size: 1.25rem;
    margin-bottom: 0.4rem;
  }

  .empty-state p {
    font-size: 0.9rem;
    line-height: 1.5;
  }
}

/* Small Mobile Devices */
@media (max-width: 480px) {
  .careers-hero {
    padding: 5rem 1rem 2.5rem;
  }

  .careers-hero h1 {
    font-size: 1.75rem;
  }

  .careers-hero p {
    font-size: 0.875rem;
    padding: 0;
  }

  .careers-container {
    padding: 0 0.875rem 1.5rem;
  }

  .careers-stats {
    gap: 0.875rem;
    margin-bottom: 1.75rem;
  }

  .stat-box {
    padding: 1.25rem;
  }

  .stat-box .number {
    font-size: 2rem;
  }

  .stat-box .label {
    font-size: 0.8rem;
  }

  .filters-section {
    padding: 1.25rem;
    border-radius: 12px;
  }

  .filters-grid {
    gap: 1rem;
  }

  .filter-group label {
    font-size: 0.75rem;
  }

  .filter-group select {
    padding: 0.65rem 0.8rem;
    font-size: 0.85rem;
  }

  .filter-actions {
    margin-top: 1rem;
  }

  .btn-filter,
  .btn-clear {
    padding: 0.8rem 1.25rem;
    font-size: 0.85rem;
  }

  .jobs-grid {
    gap: 1.25rem;
  }

  .job-card {
    padding: 1.25rem;
    border-radius: 14px;
  }

  .featured-badge {
    padding: 0.3rem 0.65rem;
    font-size: 0.65rem;
    margin-bottom: 0.875rem;
  }

  .job-title {
    font-size: 1.15rem;
  }

  .job-department {
    font-size: 0.85rem;
  }

  .job-meta {
    gap: 0.65rem;
    margin-bottom: 1rem;
  }

  .meta-item {
    font-size: 0.75rem;
  }

  .meta-item svg {
    width: 13px;
    height: 13px;
  }

  .job-tags {
    gap: 0.35rem;
    margin-bottom: 1rem;
  }

  .tag {
    padding: 0.3rem 0.65rem;
    font-size: 0.7rem;
  }

  .job-description {
    font-size: 0.825rem;
    margin-bottom: 1rem;
  }

  .job-footer {
    padding-top: 1rem;
    gap: 0.875rem;
  }

  .job-date {
    font-size: 0.75rem;
  }

  .btn-apply {
    padding: 0.8rem 1rem;
    font-size: 0.85rem;
  }

  .btn-apply svg {
    width: 16px;
    height: 16px;
  }

  .empty-state {
    padding: 2.5rem 1rem;
  }

  .empty-state svg {
    width: 50px;
    height: 50px;
  }

  .empty-state h3 {
    font-size: 1.15rem;
  }

  .empty-state p {
    font-size: 0.85rem;
  }
}

/* Tablet Portrait - Stats in 2 columns, third centered */
@media (min-width: 481px) and (max-width: 768px) {
  .careers-stats {
    grid-template-columns: repeat(2, 1fr);
  }

  .careers-stats .stat-box:last-child:nth-child(odd) {
    grid-column: 1 / -1;
    max-width: 300px;
    margin: 0 auto;
    width: 100%;
  }

  .filters-grid {
    grid-template-columns: repeat(2, 1fr);
  }

  .job-meta {
    flex-direction: row;
    flex-wrap: wrap;
  }
}

/* Center content on all devices */
.careers-hero,
.careers-container {
  margin-left: auto;
  margin-right: auto;
}
</style>
{% endblock %}

{% block content %}
<div class="careers-hero">
  <h1>Join Our Team</h1>
  <p>Be part of a team that's revolutionizing payments globally</p>
</div>

<div class="careers-container">
  <!-- Stats -->
  <div class="careers-stats">
    <div class="stat-box">
      <div class="number">{{ jobs|length }}</div>
      <div class="label">Open Positions</div>
    </div>
    <div class="stat-box">
      <div class="number">{{ departments|length }}</div>
      <div class="label">Departments</div>
    </div>
    <div class="stat-box">
      <div class="number">{{ locations|length }}</div>
      <div class="label">Locations</div>
    </div>
  </div>

  <!-- Filters -->
  <div class="filters-section">
    <form method="GET" action="{{ url_for('careers') }}" id="filterForm">
      <div class="filters-grid">
        <div class="filter-group">
          <label for="department">Department</label>
          <select name="department" id="department">
            <option value="">All Departments</option>
            {% for dept in departments %}
            <option value="{{ dept }}" {% if current_filters.department == dept %}selected{% endif %}>{{ dept }}</option>
            {% endfor %}
          </select>
        </div>

        <div class="filter-group">
          <label for="job_type">Job Type</label>
          <select name="job_type" id="job_type">
            <option value="">All Types</option>
            {% for type in job_types %}
            <option value="{{ type }}" {% if current_filters.job_type == type %}selected{% endif %}>{{ type }}</option>
            {% endfor %}
          </select>
        </div>

        <div class="filter-group">
          <label for="experience">Experience Level</label>
          <select name="experience" id="experience">
            <option value="">All Levels</option>
            {% for level in experience_levels %}
            <option value="{{ level }}" {% if current_filters.experience == level %}selected{% endif %}>{{ level }}</option>
            {% endfor %}
          </select>
        </div>

        <div class="filter-group">
          <label for="location">Location</label>
          <select name="location" id="location">
            <option value="">All Locations</option>
            {% for loc in locations %}
            <option value="{{ loc }}" {% if current_filters.location == loc %}selected{% endif %}>{{ loc }}</option>
            {% endfor %}
          </select>
        </div>
      </div>

      <div class="filter-actions">
        <button type="submit" class="btn-filter">Apply Filters</button>
        <a href="{{ url_for('careers') }}" class="btn-clear">Clear All</a>
      </div>
    </form>
  </div>

  <!-- Jobs Grid -->
  {% if jobs %}
  <div class="jobs-grid">
    {% for job in jobs %}
    <div class="job-card {% if job.featured %}featured{% endif %}">
      {% if job.featured %}
      <div class="featured-badge">Featured</div>
      {% endif %}

      <div class="job-header">
        <div>
          <h2 class="job-title">{{ job.title }}</h2>
          <div class="job-department">{{ job.department }}</div>
        </div>
      </div>

      <div class="job-meta">
        <div class="meta-item">
          <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
            <path d="M21 10c0 7-9 13-9 13s-9-6-9-13a9 9 0 0 1 18 0z"></path>
            <circle cx="12" cy="10" r="3"></circle>
          </svg>
          {{ job.location }}
        </div>
        <div class="meta-item">
          <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
            <rect x="2" y="7" width="20" height="14" rx="2" ry="2"></rect>
            <path d="M16 21V5a2 2 0 0 0-2-2h-4a2 2 0 0 0-2 2v16"></path>
          </svg>
          {{ job.job_type }}
        </div>
        <div class="meta-item">
          <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
            <path d="M20 21v-2a4 4 0 0 0-4-4H8a4 4 0 0 0-4 4v2"></path>
            <circle cx="12" cy="7" r="4"></circle>
          </svg>
          {{ job.experience_level }}
        </div>
        {% if job.remote_allowed %}
        <div class="meta-item" style="color: #22c55e;">
          <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
            <path d="M23 19a2 2 0 0 1-2 2H3a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h4l2-3h6l2 3h4a2 2 0 0 1 2 2z"></path>
            <circle cx="12" cy="13" r="4"></circle>
          </svg>
          Remote OK
        </div>
        {% endif %}
      </div>

      {% if job.skills %}
      <div class="job-tags">
        {% for skill in job.skills.split(',')[:5] %}
        <span class="tag">{{ skill.strip() }}</span>
        {% endfor %}
      </div>
      {% endif %}

      <div class="job-description">
        {{ job.description[:200] }}{% if job.description|length > 200 %}...{% endif %}
      </div>

      <div class="job-footer">
        <div class="job-date">Posted {{ job.created_at.strftime('%B %d, %Y') }}</div>
        <a href="{{ url_for('career_detail', id=job.id) }}" class="btn-apply">
          View Details
          <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
            <line x1="5" y1="12" x2="19" y2="12"></line>
            <polyline points="12 5 19 12 12 19"></polyline>
          </svg>
        </a>
      </div>
    </div>
    {% endfor %}
  </div>
  {% else %}
  <div class="empty-state">
    <svg width="80" height="80" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5">
      <rect x="2" y="7" width="20" height="14" rx="2" ry="2"></rect>
      <path d="M16 21V5a2 2 0 0 0-2-2h-4a2 2 0 0 0-2 2v16"></path>
    </svg>
    <h3>No Positions Available</h3>
    <p>We don't have any open positions matching your criteria right now. Check back soon!</p>
  </div>
  {% endif %}
</div>
{% endblock %}