{% extends "admin_base.html" %} {% block title %}Reply to Submission{% endblock
%} {% block page_title %}Reply to Contact Submission{% endblock %} {% block
page_subtitle %}Respond to user inquiry - Tracking ID: {{ submission.tracking_id
}}{% endblock %} {% block content %}
<style>
  .submission-details {
    background: var(--dark-accent);
    padding: 25px;
    border-radius: 12px;
    margin-bottom: 30px;
    border: 1px solid rgba(108, 92, 231, 0.2);
  }

  .detail-row {
    display: flex;
    margin-bottom: 20px;
    border-bottom: 1px solid rgba(108, 92, 231, 0.1);
    padding-bottom: 20px;
  }

  .detail-row:last-child {
    margin-bottom: 0;
    border-bottom: none;
    padding-bottom: 0;
  }

  .detail-label {
    font-weight: 600;
    color: var(--purple-light);
    min-width: 150px;
    flex-shrink: 0;
  }

  .detail-value {
    color: var(--text-light);
    flex: 1;
    word-break: break-word;
  }

  .status-badge {
    padding: 6px 15px;
    border-radius: 20px;
    font-weight: 600;
    font-size: 0.85rem;
    display: inline-block;
  }

  .status-pending {
    background: linear-gradient(135deg, var(--warning) 0%, #ff7979 100%);
    color: white;
  }

  .status-replied {
    background: linear-gradient(135deg, var(--success) 0%, #00b894 100%);
    color: white;
  }

  .reply-section {
    background: var(--dark-accent);
    padding: 25px;
    border-radius: 12px;
    border: 1px solid rgba(108, 92, 231, 0.2);
  }

  .section-title {
    font-size: 1.3rem;
    font-weight: 600;
    color: var(--purple-light);
    margin-bottom: 20px;
    display: flex;
    align-items: center;
    gap: 10px;
  }

  .form-group {
    margin-bottom: 20px;
  }

  .form-label {
    color: var(--purple-light);
    font-weight: 600;
    margin-bottom: 10px;
    display: block;
  }

  .form-control {
    background: var(--dark-bg);
    border: 1px solid rgba(108, 92, 231, 0.3);
    color: var(--text-light);
    padding: 15px;
    border-radius: 10px;
    width: 100%;
    font-size: 1rem;
    font-family: "Poppins", sans-serif;
    transition: all 0.3s ease;
    resize: vertical;
  }

  .form-control:focus {
    background: var(--dark-bg);
    border-color: var(--purple-primary);
    color: var(--text-light);
    box-shadow: 0 0 0 0.25rem rgba(108, 92, 231, 0.25);
    outline: none;
  }

  .form-control::placeholder {
    color: var(--text-muted);
  }

  textarea.form-control {
    min-height: 200px;
  }

  .form-actions {
    display: flex;
    gap: 15px;
    margin-top: 25px;
    flex-wrap: wrap;
  }

  .btn {
    padding: 12px 30px;
    border-radius: 10px;
    border: none;
    font-weight: 600;
    cursor: pointer;
    transition: all 0.3s ease;
    display: inline-flex;
    align-items: center;
    gap: 8px;
    text-decoration: none;
    font-size: 1rem;
  }

  .btn-primary {
    background: linear-gradient(
      135deg,
      var(--purple-primary) 0%,
      var(--blue-accent) 100%
    );
    color: white;
  }

  .btn-primary:hover {
    transform: translateY(-2px);
    box-shadow: 0 5px 20px rgba(108, 92, 231, 0.4);
  }

  .btn-secondary {
    background: var(--dark-bg);
    color: var(--text-light);
    border: 1px solid rgba(108, 92, 231, 0.3);
  }

  .btn-secondary:hover {
    background: var(--dark-accent);
    color: var(--text-light);
    text-decoration: none;
  }

  .previous-reply {
    background: var(--dark-bg);
    padding: 20px;
    border-radius: 10px;
    border-left: 4px solid var(--success);
    margin-bottom: 25px;
  }

  .previous-reply-label {
    font-weight: 600;
    color: var(--success);
    margin-bottom: 10px;
    display: flex;
    align-items: center;
    gap: 8px;
  }

  .previous-reply-text {
    color: var(--text-light);
    line-height: 1.6;
  }

  .previous-reply-date {
    color: var(--text-muted);
    font-size: 0.85rem;
    margin-top: 10px;
  }

  @media (max-width: 768px) {
    .detail-row {
      flex-direction: column;
      gap: 8px;
    }

    .detail-label {
      min-width: auto;
    }

    .form-actions {
      flex-direction: column;
    }

    .btn {
      width: 100%;
      justify-content: center;
    }
  }
</style>

<div class="content-card">
  <h3 class="section-title">
    <i class="fas fa-info-circle"></i> Submission Details
  </h3>
  <div class="submission-details">
    <div class="detail-row">
      <div class="detail-label">Tracking ID:</div>
      <div class="detail-value">
        <span
          style="
            font-family: monospace;
            font-size: 1.1rem;
            font-weight: 600;
            color: var(--purple-light);
          "
        >
          {{ submission.tracking_id }}
        </span>
      </div>
    </div>
    <div class="detail-row">
      <div class="detail-label">Name:</div>
      <div class="detail-value">{{ submission.name }}</div>
    </div>
    <div class="detail-row">
      <div class="detail-label">Email:</div>
      <div class="detail-value">
        <a
          href="mailto:{{ submission.email }}"
          style="color: var(--purple-light); text-decoration: none"
        >
          {{ submission.email }}
        </a>
      </div>
    </div>
    <div class="detail-row">
      <div class="detail-label">Phone:</div>
      <div class="detail-value">
        <a
          href="tel:{{ submission.phone }}"
          style="color: var(--purple-light); text-decoration: none"
        >
          {{ submission.phone }}
        </a>
      </div>
    </div>
    <div class="detail-row">
      <div class="detail-label">Subject:</div>
      <div class="detail-value">{{ submission.subject }}</div>
    </div>
    <div class="detail-row">
      <div class="detail-label">Message:</div>
      <div class="detail-value">{{ submission.message }}</div>
    </div>
    <div class="detail-row">
      <div class="detail-label">Submitted:</div>
      <div class="detail-value">{{ submission.timestamp }}</div>
    </div>
    <div class="detail-row">
      <div class="detail-label">Status:</div>
      <div class="detail-value">
        <span class="status-badge status-{{ submission.status }}">
          {{ submission.status.upper() }}
        </span>
      </div>
    </div>
  </div>
</div>

<div class="content-card">
  <h3 class="section-title">
    <i class="fas fa-reply"></i> {% if submission.admin_reply %}Update Reply{%
    else %}Send Reply{% endif %}
  </h3>

  {% if submission.admin_reply %}
  <div class="previous-reply">
    <div class="previous-reply-label">
      <i class="fas fa-check-circle"></i> Previous Reply
    </div>
    <div class="previous-reply-text">{{ submission.admin_reply }}</div>
    <div class="previous-reply-date">
      Replied on: {{ submission.reply_timestamp }}
    </div>
  </div>
  {% endif %}

  <form method="POST" action="/admin/submission/{{ submission.id }}/reply">
    <div class="form-group">
      <label class="form-label">Your Reply Message:</label>
      <textarea
        name="reply_message"
        class="form-control"
        placeholder="Type your reply here..."
        required
      >
{{ submission.admin_reply }}</textarea
      >
    </div>

    <div class="form-actions">
      <button type="submit" class="btn btn-primary">
        <i class="fas fa-paper-plane"></i>
        {% if submission.admin_reply %}Update Reply{% else %}Send Reply{% endif
        %}
      </button>
      <a href="/admin/contacts" class="btn btn-secondary">
        <i class="fas fa-arrow-left"></i> Back to Messages
      </a>
    </div>
  </form>
</div>
{% endblock %}
